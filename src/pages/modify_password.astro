---
import Button from '../components/Button.astro';
import TextField from '../components/TextField.astro';
import Layout from '../layouts/Layout.astro';

if (Astro.request.method == 'POST') {
	const formData = await Astro.request.formData();
	const redirect = Astro.url.searchParams.get('redirect') || '';
	// Vérification des champs
	if (!formData.has('password') || !formData.has('password_confirm')) {
		return Astro.redirect('/modify_password?error=missing_field');
	}
	const email = formData.get('email').toString();
}
---

<Layout title="Réinitialiser votre mot de passe" no_searchbar>
	<main>
		<h1>Réinitialiser votre mot de passe</h1>
		<form method="post" class="formlist">
			<table>
				<th>Mot de passe :</th>
				<td>
					<TextField
						text=""
						placeholder="Entrez votre nouveau mot de passe"
						type="password"
						length="15rem"
						name="password"
					/>
				</td>
				<tr>
					<th>Confirmer le mot de passe :</th>
					<td>
						<TextField
							text=""
							placeholder="Confirmer le nouveau mot de passe"
							type="password"
							length="15rem"
							name="password_confirm"
						/>
					</td>
				</tr>
			</table>
			<div id="btn">
				<Button text="Recuperer le mot de passe" />
			</div>
		</form>
	</main>
</Layout>

<style>
	#btn {
		/* centre le bouton */
		text-align: center;
	}
	main {
		background-color: var(--theme-secondary);
		margin: 3rem 5rem;
		padding: 2rem;

		border-radius: 2rem;

		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
	}
	h1 {
		margin-top: 0rem;
	}
</style>
