---
import Article from '../model/Article';

export interface Props {
	article: Article;
}

const { article } = Astro.props;

const id = article.getId();
const titre = article.getName();
const image = await article.getPoster();
const prix = article.getPrixBase();
const dateDebut = article.getDebutVente();
const dateFin = article.getFinVente();

const date = dateDebut > new Date() ? dateDebut : dateFin;
const enCours = dateDebut < new Date() && dateFin > new Date();
---

<li>
	<a href={'/auction/' + id}>
		<div><img src={image} alt={titre} /></div>
		<h3>{titre}</h3>
		<p>
			{
				enCours
					? 'Finit le ' + date.toLocaleDateString()
					: 'Débute le ' + date.toLocaleDateString()
			}
		</p>
		<p>{prix} €</p>
	</a>
</li>

<style>
	li {
		width: 300px;
		margin: 20px;

		display: flex;
		flex-direction: column;

		background-color: var(--theme-primary);

		border-radius: 10px;
		overflow: hidden;
	}

	li a {
		text-decoration: none;
		color: inherit;
	}

	div,
	img {
		width: 100%;
		height: 250px;
		object-fit: cover;
	}

	h3,
	p {
		margin: 0;
		padding: 5px;
	}
</style>
